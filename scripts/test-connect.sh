#!/bin/bash
# Test Toast connect endpoint

COOKIE="sb-zmclcvjlibrvvrfnrjwk-auth-token=base64-eyJhY2Nlc3NfdG9rZW4iOiJleUpoYkdjaU9pSkZVekkxTmlJc0ltdHBaQ0k2SW1JMU1qUmlaamczTFRGaFl6UXROR1ppWVMxaVltWmpMVFJpTTJOak5qZzBOMk5sTlNJc0luUjVjQ0k2SWtwWFZDSjkuZXlKcGMzTWlPaUpvZEhSd2N6b3ZMM3B0WTJ4amRtcHNhV0p5ZG5aeVptNXlhbmRyTG5OMWNHRmlZWE5sTG1OdkwyRjFkR2d2ZGpFaUxDSnpkV0lpT2lKalpqQTJOMk5tWlMxbVpXWmxMVFF3TmprdE9EUTBaaTFpTUROa05UZ3hPV1E1Tm1NaUxDSmhkV1FpT2lKaGRYUm9aVzUwYVdOaGRHVmtJaXdpWlhod0lqb3hOemN4T1RFek1qSTVMQ0pwWVhRaU9qRTNOekU1TURrMk1qa3NJbVZ0WVdsc0lqb2ljbmxoYmtCd1pXRnlZVzVoYkhsMGFXTnpMbU52YlNJc0luQm9iMjVsSWpvaUlpd2lZWEJ3WDIxbGRHRmtZWFJoSWpwN0luQnliM1pwWkdWeUlqb2laVzFoYVd3aUxDSndjbTkyYVdSbGNuTWlPbHNpWlcxaGFXd2lYWDBzSW5WelpYSmZiV1YwWVdSaGRHRWlPbnNpWlcxaGFXeGZkbVZ5YVdacFpXUWlPblJ5ZFdWOUxDSnliMnhsSWpvaVlYVjBhR1Z1ZEdsallYUmxaQ0lzSW1GaGJDSTZJbUZoYkRFaUxDSmhiWElpT2x0N0ltMWxkR2h2WkNJNkluQmhjM04zYjNKa0lpd2lkR2x0WlhOMFlXMXdJam94TnpjeE9EWTBNRFEyZlYwc0luTmxjM05wYjI1ZmFXUWlPaUpoT1RFMVlUTTVNaTAyWkRaaExUUXlORFF0T1dNMVpDMHpOemc1WkRka01UTTJZV0VpTENKcGMxOWhibTl1ZVcxdmRYTWlPbVpoYkhObGZRLlN6YXZtU3ZuYXhPLVpwRHZzMFJiWmh1SDU2YUFlX3pNaFhWYXh0T1plR2wtTV9zZDhTMDRteFRJZF9CVmpIMFJCYjEwYnlYZkw4bHRjZlg5ODZpUDN3IiwidG9rZW5fdHlwZSI6ImJlYXJlciIsImV4cGlyZXNfaW4iOjM2MDAsImV4cGlyZXNfYXQiOjE3NzE5MTMyMjksInJlZnJlc2hfdG9rZW4iOiI3bXA2cXVoaWZhcGUiLCJ1c2VyIjp7ImlkIjoiY2YwNjdjZmUtZmVmZS00MDY5LTg0NGYtYjAzZDU4MTlkOTZjIiwiYXVkIjoiYXV0aGVudGljYXRlZCIsInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiZW1haWwiOiJyeWFuQHBlYXJhbmFseXRpY3MuY29tIiwiZW1haWxfY29uZmlybWVkX2F0IjoiMjAyNi0wMi0yM1QwMjoyNDozOS44MjgwNjlaIiwicGhvbmUiOiIiLCJjb25maXJtZWRfYXQiOiIyMDI2LTAyLTIzVDAyOjI0OjM5LjgyODA2OVoiLCJsYXN0X3NpZ25faW5fYXQiOiIyMDI2LTAyLTIzVDE2OjI3OjI2LjU3NjY5M1oiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZX0sImlkZW50aXRpZXMiOlt7ImlkZW50aXR5X2lkIjoiNjg5MDE3Y2YtNDIxZi00ZmUwLWI4MWYtMGQzMDZhNDhmNDM3IiwiaWQiOiJjZjA2N2NmZS1mZWZlLTQwNjktODQ0Zi1iMDNkNTgxOWQ5NmMiLCJ1c2VyX2lkIjoiY2YwNjdjZmUtZmVmZS00MDY5LTg0NGYtYjAzZDU4MTlkOTZjIiwiaWRlbnRpdHlfZGF0YSI6eyJlbWFpbCI6InJ5YW5AcGVhcmFuYWx5dGljcy5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInBob25lX3ZlcmlmaWVkIjpmYWxzZSwic3ViIjoiY2YwNjdjZmUtZmVmZS00MDY5LTg0NGYtYjAzZDU4MTlkOTZjIn0sInByb3ZpZGVyIjoiZW1haWwiLCJsYXN0X3NpZ25faW5fYXQiOiIyMDI2LTAyLTIzVDAyOjI0OjM5LjgxMzU2NFoiLCJjcmVhdGVkX2F0IjoiMjAyNi0wMi0yM1QwMjoyNDozOS44MTQxNjlaIiwidXBkYXRlZF9hdCI6IjIwMjYtMDItMjNUMDI6MjQ6MzkuODE0MTY5WiIsImVtYWlsIjoicnlhbkBwZWFyYW5hbHl0aWNzLmNvbSJ9XSwiY3JlYXRlZF9hdCI6IjIwMjYtMDItMjNUMDI6MjQ6MzkuNzk2MzM4WiIsInVwZGF0ZWRfYXQiOiIyMDI2LTAyLTI0VDA1OjA3OjA5LjkxOTUwNVoiLCJpc19hbm9ueW1vdXMiOmZhbHNlfX0"

curl -X POST "http://localhost:3001/api/integrations/toast/connect" \
  -H "Content-Type: application/json" \
  -H "Cookie: $COOKIE" \
  -d '{
    "clientId": "fVi0HgxbkKlHucJUY5ZIGN4SkF4efvuZ",
    "clientSecret": "b7382G25hHguaJJFK7aO-hvBpx8KBWmHj6G3r7Ep_blVuHmp9gGr_8b0LUnXeGn_",
    "restaurantGuid": "7d5f8162-aeda-436a-85d0-7191e37b96c3",
    "locationId": "loc-mon-chou-chou"
  }'
